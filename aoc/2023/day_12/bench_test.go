package main

import (
	"aoc/common/collections"
	"fmt"
	"testing"
)

var result int64

func Benchmark_recursive(b *testing.B) {
	springs := []byte("????????????##??")
	damagedSprings := []int64{1, 1, 1, 1, 3}

	for n := 1; n <= 5; n++ {
		unfoldedSprings := collections.Join(collections.Repeat(springs, n), '?')
		unfoldedDamagedSprings := collections.Flat(collections.Repeat(damagedSprings, n))
		b.Run(fmt.Sprintf("with n times = %d", n), func(b *testing.B) {
			var res int64
			for i := 0; i < b.N; i++ {
				res = recursive(
					unfoldedSprings,
					unfoldedDamagedSprings,
				)
			}
			result = res
		})
	}
}

func Benchmark_iterative(b *testing.B) {
	springs := []byte("????????????##??")
	damagedSprings := []int64{1, 1, 1, 1, 3}

	unfoldedSprings := collections.Join(collections.Repeat(springs, 2), '?')
	unfoldedDamagedSprings := collections.Flat(collections.Repeat(damagedSprings, 2))
	var res int64
	for i := 0; i < b.N; i++ {
		res = iterative(
			unfoldedSprings,
			unfoldedDamagedSprings,
		)
	}
	result = res
}

/*
Example 1:
.??..??...?##. 1,1,3

.#? 1 	| ..??...?##. 1,3 +2
		| ..#? 1	| ...?##. 3
		| ..?# 1	| ...?##. 3
					| ...###. [] +1

.?# 1 	| ..??...?##. 1,3 +2

Example 2:
????????????##?? 1,1,1,1,3

?? 1	| ??????????##?? 1,1,1,3
		| ?? 1	| ????????##?? 1,1,3
				| ?? 1	| ??????##?? 1,3
						| ?? 1	| ????##?? 3 +2
								| ???###?? [] +1
								| ????###? [] +1

??? 1	| ?????????##?? 1,1,1,3
		| ?? 1	| ???????##?? 1,1,3
				| ?? 1	| ?????##?? 1,3
						| ?? 1 	| ???##?? 3 +2
								| ???###? [] +1
								| ??###?? [] +1

???? 1	| ????????##?? 1,1,1,3
		| ?? 1	| ??????##?? 1,1,3
				| ?? 1	| ????##?? 1,3
						| ?? 1 	| ??##?? 3 +2
								| ?###?? [] +1
								| ??###? [] +1

????? 1	| ???????##?? 1,1,1,3
		| ?? 1	| ?????##?? 1,1,3
				| ?? 1	| ???##?? 1,3
						| ?? 1 	| ?##?? 3 +2
								| ###?? [] +1
								| ?###? [] +1

?????? 1	| ??????##?? 1,1,1,3
			| ?? 1	| ????##?? 1,1,3
					| ?? 1	| ??##?? 1,3
							| ?? 1 	| ##?? 3 +1
									| ###? [] +1

????????????##?? 1,1,1,1,3

???????????? 1,1,1,1	| ##?? 3
??????????? 1,1,1,1		| ?##?? 3
*/
